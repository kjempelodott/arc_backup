<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link REL="SHORTCUT ICON" HREF="http//www.nordugrid.org/favicon.ico">
    <link rel="STYLESHEET" href="_static/pygments.css" type="text/css" />
    <link rel="STYLESHEET" href="_static/nordugrid_wrapper.css" type="text/css" />
    <title>NorduGrid | Python LRMS backends</title>
  </head>
  
  <body class="LONG">
    <div class="MAIN">
      <h1 class="TITLE">Python LRMS backends</h1>
      
      <div class="section" id="module-tree">
<h1>Module tree &gt;<a class="headerlink" href="#module-tree" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt><a class="reference internal" href="#module-lrms" title="lrms"><code class="xref py py-mod docutils literal"><span class="pre">lrms</span></code></a></dt>
<dd><div class="first last line-block">
<div class="line"><a href="#id1"><span class="problematic" id="id2">|</span></a>– <a class="reference internal" href="#module-lrms.fork" title="lrms.fork"><code class="xref py py-mod docutils literal"><span class="pre">fork</span></code></a></div>
<div class="line"><a href="#id3"><span class="problematic" id="id4">|</span></a>– <a class="reference internal" href="#module-lrms.lsf" title="lrms.lsf"><code class="xref py py-mod docutils literal"><span class="pre">lsf</span></code></a></div>
<div class="line"><a href="#id5"><span class="problematic" id="id6">|</span></a>– <a class="reference internal" href="#module-lrms.sceapi" title="lrms.sceapi"><code class="xref py py-mod docutils literal"><span class="pre">sceapi</span></code></a></div>
<div class="line"><a href="#id7"><span class="problematic" id="id8">|</span></a>– <a class="reference internal" href="#module-lrms.slurm" title="lrms.slurm"><code class="xref py py-mod docutils literal"><span class="pre">slurm</span></code></a></div>
<div class="line"><a href="#id9"><span class="problematic" id="id10">|</span></a>– <a class="reference internal" href="#module-lrms.common" title="lrms.common"><code class="xref py py-mod docutils literal"><span class="pre">common</span></code></a></div>
<div class="line-block">
<div class="line"><a href="#id11"><span class="problematic" id="id12">|</span></a>– <a class="reference internal" href="#module-lrms.common.cancel" title="lrms.common.cancel"><code class="xref py py-mod docutils literal"><span class="pre">cancel</span></code></a></div>
<div class="line"><a href="#id13"><span class="problematic" id="id14">|</span></a>– <a class="reference internal" href="#module-lrms.common.config" title="lrms.common.config"><code class="xref py py-mod docutils literal"><span class="pre">config</span></code></a></div>
<div class="line"><a href="#id15"><span class="problematic" id="id16">|</span></a>– <a class="reference internal" href="#module-lrms.common.files" title="lrms.common.files"><code class="xref py py-mod docutils literal"><span class="pre">files</span></code></a></div>
<div class="line"><a href="#id17"><span class="problematic" id="id18">|</span></a>– <code class="xref py py-mod docutils literal"><span class="pre">log</span></code></div>
<div class="line"><a href="#id19"><span class="problematic" id="id20">|</span></a>– <a class="reference internal" href="#module-lrms.common.parse" title="lrms.common.parse"><code class="xref py py-mod docutils literal"><span class="pre">parse</span></code></a></div>
<div class="line"><a href="#id21"><span class="problematic" id="id22">|</span></a>– <a class="reference internal" href="#module-lrms.common.proc" title="lrms.common.proc"><code class="xref py py-mod docutils literal"><span class="pre">proc</span></code></a></div>
<div class="line"><a href="#id23"><span class="problematic" id="id24">|</span></a>– <a class="reference internal" href="#module-lrms.common.scan" title="lrms.common.scan"><code class="xref py py-mod docutils literal"><span class="pre">scan</span></code></a></div>
<div class="line"><a href="#id25"><span class="problematic" id="id26">|</span></a>– <code class="xref py py-mod docutils literal"><span class="pre">ssh</span></code></div>
<div class="line"><a href="#id27"><span class="problematic" id="id28">|</span></a>– <a class="reference internal" href="#module-lrms.common.submit" title="lrms.common.submit"><code class="xref py py-mod docutils literal"><span class="pre">submit</span></code></a></div>
</div>
</div>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="section" id="module-lrms">
<span id="package-lrms"></span><h2>Package: lrms &gt;<a class="headerlink" href="#module-lrms" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">lrms</span></code> package contains batch system specific modules and a sub-package <code class="docutils literal"><span class="pre">lrms.common</span></code>. Each module has functions for cancel, scan and submit jobs, with an interface similar to the bash backend scripts:</p>
<ul class="simple">
<li>Cancel ( arc.conf, grami_file )</li>
<li>Scan   ( arc.conf, control_dirs )</li>
<li>Submit ( arc.conf, job_description, job_container )</li>
</ul>
<hr class="docutils" />
<div class="section" id="module-lrms.fork">
<span id="module-lrms-fork"></span><h3>Module: lrms.fork<a class="headerlink" href="#module-lrms.fork" title="Permalink to this headline">¶</a></h3>
<p>No batch system (fork) interface module.</p>
<dl class="function">
<dt id="lrms.fork.set_fork">
<code class="descclassname">lrms.fork.</code><code class="descname">set_fork</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/fork.html#set_fork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.fork.set_fork" title="Permalink to this definition">¶</a></dt>
<dd><p>Set fork specific <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.fork.Submit">
<code class="descclassname">lrms.fork.</code><code class="descname">Submit</code><span class="sig-paren">(</span><em>config</em>, <em>jobdescs</em>, <em>jc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/fork.html#Submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.fork.Submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a job to the local or remote (SSH) machine. This method executes the required
Run Time Environment scripts and assembles the bash job script. The job script is
written to file and run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>jobdescs</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescriptionList</span></code>) &#8211; job description list object</li>
<li><strong>jc</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.compute.JobContainer</span></code>) &#8211; job container object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully submitted, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.fork.get_job_script">
<code class="descclassname">lrms.fork.</code><code class="descname">get_job_script</code><span class="sig-paren">(</span><em>jobdescs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/fork.html#get_job_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.fork.get_job_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble bash job script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobdescs</strong> &#8211; list of job description objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">job script</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.fork.Cancel">
<code class="descclassname">lrms.fork.</code><code class="descname">Cancel</code><span class="sig-paren">(</span><em>config</em>, <em>grami_file</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/fork.html#Cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.fork.Cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a job. The TERM signal is sent to allow the process to terminate
gracefully within 5 seconds, followed by a KILL signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>grami_file</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to grami file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully cancelled, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.fork.Scan">
<code class="descclassname">lrms.fork.</code><code class="descname">Scan</code><span class="sig-paren">(</span><em>config</em>, <em>ctr_dirs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/fork.html#Scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.fork.Scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the local or remote (SSH) machine for all jobs in /[controldir]/processing.
If the job has stopped running, the exit code is read and the comments file
is updated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>ctr_dirs</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> [ <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> ... ]) &#8211; list of paths to control directories</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.lsf">
<span id="module-lrms-lsf"></span><h3>Module: lrms.lsf<a class="headerlink" href="#module-lrms.lsf" title="Permalink to this headline">¶</a></h3>
<p>LSF batch system interface module.</p>
<dl class="function">
<dt id="lrms.lsf.set_lsf">
<code class="descclassname">lrms.lsf.</code><code class="descname">set_lsf</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#set_lsf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.set_lsf" title="Permalink to this definition">¶</a></dt>
<dd><p>Set LSF specific <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.Submit">
<code class="descclassname">lrms.lsf.</code><code class="descname">Submit</code><span class="sig-paren">(</span><em>config</em>, <em>jobdescs</em>, <em>jc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#Submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.Submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a job to the LSF queue specified in arc.conf. This method executes the required
Run Time Environment scripts and assembles the bash job script. The job script is
written to file and submitted with <code class="docutils literal"><span class="pre">bsub</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>jobdescs</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescriptionList</span></code>) &#8211; job description list object</li>
<li><strong>jc</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.compute.JobContainer</span></code>) &#8211; job container object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully submitted, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.set_job_id">
<code class="descclassname">lrms.lsf.</code><code class="descname">set_job_id</code><span class="sig-paren">(</span><em>handle</em>, <em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#set_job_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.set_job_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Read local job ID from <code class="docutils literal"><span class="pre">bsub</span></code> output and set <code class="docutils literal"><span class="pre">JobID</span></code> attribute of job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>handle</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><em>object</em></a>) &#8211; sbatch handle</li>
<li><strong>job</strong> (py:class:<a href="#id29"><span class="problematic" id="id30">`</span></a>arc.Job) &#8211; job object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if found, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.get_job_script">
<code class="descclassname">lrms.lsf.</code><code class="descname">get_job_script</code><span class="sig-paren">(</span><em>jobdescs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#get_job_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.get_job_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble bash job script for an LSF host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobdescs</strong> &#8211; list of job description objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">job script</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.Cancel">
<code class="descclassname">lrms.lsf.</code><code class="descname">Cancel</code><span class="sig-paren">(</span><em>config</em>, <em>jobid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#Cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.Cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a job running at an LSF host with <code class="docutils literal"><span class="pre">bkill</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>grami_file</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to grami file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully cancelled, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.Scan">
<code class="descclassname">lrms.lsf.</code><code class="descname">Scan</code><span class="sig-paren">(</span><em>config</em>, <em>ctr_dirs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#Scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.Scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the LSF host for all jobs in /[controldir]/processing with <code class="docutils literal"><span class="pre">bjobs</span></code>.
If the job has stopped running, the exit code is read and the 
diagnostics and comments files are updated. Finally <code class="docutils literal"><span class="pre">gm-kick</span></code> is executed
on all jobs with an exit code.</p>
<p>If the exit code can not be read from the diagnostics file, it will (after
5 tries) be kicked with status UNKNOWN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>ctr_dirs</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> [ <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> ... ]) &#8211; list of paths to control directories</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.lsf.assemble_BSUB">
<code class="descclassname">lrms.lsf.</code><code class="descname">assemble_BSUB</code><span class="sig-paren">(</span><em>j</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/lsf.html#assemble_BSUB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.lsf.assemble_BSUB" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble the <code class="docutils literal"><span class="pre">bsub</span></code> specific section of the job script.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobdescs</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescription</span></code>) &#8211; job description object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">job script part</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.sceapi">
<span id="module-lrms-sceapi"></span><h3>Module: lrms.sceapi<a class="headerlink" href="#module-lrms.sceapi" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.slurm">
<span id="module-lrms-slurm"></span><h3>Module: lrms.slurm<a class="headerlink" href="#module-lrms.slurm" title="Permalink to this headline">¶</a></h3>
<p>SLURM batch system interface module.</p>
<dl class="function">
<dt id="lrms.slurm.set_slurm">
<code class="descclassname">lrms.slurm.</code><code class="descname">set_slurm</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#set_slurm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.set_slurm" title="Permalink to this definition">¶</a></dt>
<dd><p>Set SLURM specific <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.Submit">
<code class="descclassname">lrms.slurm.</code><code class="descname">Submit</code><span class="sig-paren">(</span><em>config</em>, <em>jobdescs</em>, <em>jc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#Submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.Submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits a job to the SLURM queue specified in arc.conf. This method executes the required
Run Time Environment scripts and assembles the bash job script. The job script is
written to file and submitted with <code class="docutils literal"><span class="pre">sbatch</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>jobdescs</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescriptionList</span></code>) &#8211; job description list object</li>
<li><strong>jc</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.compute.JobContainer</span></code>) &#8211; job container object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully submitted, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.wait_for_queue">
<code class="descclassname">lrms.slurm.</code><code class="descname">wait_for_queue</code><span class="sig-paren">(</span><em>handle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#wait_for_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.wait_for_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Read from <code class="docutils literal"><span class="pre">sbatch</span></code> output whether the queue is full.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>handle</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><em>object</em></a>) &#8211; sbatch handle</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if queue is full, else <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.set_job_id">
<code class="descclassname">lrms.slurm.</code><code class="descname">set_job_id</code><span class="sig-paren">(</span><em>handle</em>, <em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#set_job_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.set_job_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Read local job ID from <code class="docutils literal"><span class="pre">sbatch</span></code> output and set <code class="docutils literal"><span class="pre">JobID</span></code> attribute of job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>handle</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><em>object</em></a>) &#8211; sbatch handle</li>
<li><strong>job</strong> (py:class:<a href="#id31"><span class="problematic" id="id32">`</span></a>arc.Job) &#8211; job object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if found, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.get_job_script">
<code class="descclassname">lrms.slurm.</code><code class="descname">get_job_script</code><span class="sig-paren">(</span><em>jobdescs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#get_job_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.get_job_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble bash job script for a SLURM host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobdescs</strong> &#8211; list of job description objects</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">job script</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.Cancel">
<code class="descclassname">lrms.slurm.</code><code class="descname">Cancel</code><span class="sig-paren">(</span><em>config</em>, <em>jobid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#Cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.Cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel a job running at a SLURM host with <code class="docutils literal"><span class="pre">scancel</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>jobid</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; local job ID</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">True</span></code> if successfully cancelled, else <code class="docutils literal"><span class="pre">False</span></code></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.verify_job_id">
<code class="descclassname">lrms.slurm.</code><code class="descname">verify_job_id</code><span class="sig-paren">(</span><em>jobid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#verify_job_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.verify_job_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that the job ID is an integer else raise <code class="xref py py-class docutils literal"><span class="pre">ArcError</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobid</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; local job ID</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.slurm.Scan">
<code class="descclassname">lrms.slurm.</code><code class="descname">Scan</code><span class="sig-paren">(</span><em>config</em>, <em>ctr_dirs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/slurm.html#Scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.slurm.Scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the SLURM host for all jobs in /[controldir]/processing with <code class="docutils literal"><span class="pre">squeue</span></code>.
If the job has stopped running, more detailed information is fetched with <code class="docutils literal"><span class="pre">scontrol</span></code>,
and the diagnostics and comments files are updated. Finally <code class="docutils literal"><span class="pre">gm-kick</span></code> is executed
on all jobs with an exit code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>ctr_dirs</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> [ <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> ... ]) &#8211; list of paths to control directories</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="module-lrms.common">
<span id="package-lrms-common"></span><h2>Package: lrms.common &gt;<a class="headerlink" href="#module-lrms.common" title="Permalink to this headline">¶</a></h2>
<p>Subpackage with helper functions for the batch system specific modules.</p>
<p>Logging is setup here.</p>
<hr class="docutils" />
<div class="section" id="module-lrms.common.cancel">
<span id="module-lrms-common-cancel"></span><h3>Module: lrms.common.cancel<a class="headerlink" href="#module-lrms.common.cancel" title="Permalink to this headline">¶</a></h3>
<p>Module for job cancelling.</p>
<dl class="function">
<dt id="lrms.common.cancel.cancel">
<code class="descclassname">lrms.common.cancel.</code><code class="descname">cancel</code><span class="sig-paren">(</span><em>lrms</em>, <em>job_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/cancel.html#cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.cancel.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel job with ID <code class="docutils literal"><span class="pre">job_id</span></code> within the given batch system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lrms</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; batch system (e.g. slurm)</li>
<li><strong>job_id</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; local job ID within the batch system</li>
<li><strong>remote</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; <code class="docutils literal"><span class="pre">True</span></code> if remote host</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">command return code</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.config">
<span id="module-lrms-common-config"></span><h3>Module: lrms.common.config<a class="headerlink" href="#module-lrms.common.config" title="Permalink to this headline">¶</a></h3>
<p>Provides the <code class="docutils literal"><span class="pre">Config</span></code> object, with each arc.conf option as an attribute.</p>
<dl class="function">
<dt id="lrms.common.config.is_conf_setter">
<code class="descclassname">lrms.common.config.</code><code class="descname">is_conf_setter</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#is_conf_setter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.is_conf_setter" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for functions that set <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
</dd></dl>

<dl class="function">
<dt id="lrms.common.config.configure">
<code class="descclassname">lrms.common.config.</code><code class="descname">configure</code><span class="sig-paren">(</span><em>configfile</em>, <em>*func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#configure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.configure" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse arc.conf using <a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.RawConfigParser.read" title="(in Python v2.6)"><code class="xref py py-meth docutils literal"><span class="pre">ConfigParser.RawConfigParser.read()</span></code></a> and
set all dicovered options as <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes. 
Additional setter functions <code class="docutils literal"><span class="pre">*func</span></code> will only be executed if they have
been decorated with <a class="reference internal" href="#lrms.common.config.is_conf_setter" title="lrms.common.config.is_conf_setter"><code class="xref py py-meth docutils literal"><span class="pre">lrms.common.config.is_conf_setter()</span></code></a>.</p>
<p>The <code class="docutils literal"><span class="pre">Config</span></code> object will be pickled to <code class="docutils literal"><span class="pre">/tmp/python_lrms_arc.conf</span></code>.
In case the pickle file exists and its modification time is newer than
that of arc.conf, the <code class="docutils literal"><span class="pre">Config</span></code> object will be loaded from this file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configfile</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to arc.conf</li>
<li><strong>*func</strong> &#8211; <p>variable length setter function (e.g. set_slurm) list</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.config.set_common">
<code class="descclassname">lrms.common.config.</code><code class="descname">set_common</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#set_common"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.set_common" title="Permalink to this definition">¶</a></dt>
<dd><p>Set [common] <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.config.set_gridmanager">
<code class="descclassname">lrms.common.config.</code><code class="descname">set_gridmanager</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#set_gridmanager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.set_gridmanager" title="Permalink to this definition">¶</a></dt>
<dd><p>Set [grid-manager] <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.config.set_cluster">
<code class="descclassname">lrms.common.config.</code><code class="descname">set_cluster</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#set_cluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.set_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Set [cluster] <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.config.set_queue">
<code class="descclassname">lrms.common.config.</code><code class="descname">set_queue</code><span class="sig-paren">(</span><em>cfg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/config.html#set_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.config.set_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set [queue] <code class="xref py py-data docutils literal"><span class="pre">Config</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cfg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/configparser.html#ConfigParser.ConfigParser" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">ConfigParser.ConfigParser</span></code></a>) &#8211; parsed arc.conf</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.files">
<span id="module-lrms-common-files"></span><h3>Module: lrms.common.files<a class="headerlink" href="#module-lrms.common.files" title="Permalink to this headline">¶</a></h3>
<p>Wrapper methods for stat-ing, reading and writing files.</p>
<dl class="function">
<dt id="lrms.common.files.read">
<code class="descclassname">lrms.common.files.</code><code class="descname">read</code><span class="sig-paren">(</span><em>path</em>, <em>tail=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/files.html#read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.files.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read file content.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to file</li>
<li><strong>tail</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; number of lines to read (from end), entire file if 0</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">file content splitted by newline</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> [ <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> ... ]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.files.tail">
<code class="descclassname">lrms.common.files.</code><code class="descname">tail</code><span class="sig-paren">(</span><em>path</em>, <em>n</em>, <em>BUFSIZ=4096</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/files.html#tail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.files.tail" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to GNU tail -n [N].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to file</li>
<li><strong>n</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; number of lines to read</li>
<li><strong>BUFSIZ</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; chunk size in bytes (default: 4096)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.files.write">
<code class="descclassname">lrms.common.files.</code><code class="descname">write</code><span class="sig-paren">(</span><em>path</em>, <em>buf</em>, <em>mode=420</em>, <em>append=False</em>, <em>remote_host=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/files.html#write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.files.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write buffer to file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to file</li>
<li><strong>buf</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; buffer</li>
<li><strong>mode</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; file mode</li>
<li><strong>append</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><em>bool</em></a>) &#8211; <code class="docutils literal"><span class="pre">True</span></code> if buffer should be appended to existing file</li>
<li><strong>remote_host</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><em>bool</em></a>) &#8211; file will be opened with sftp at the specified hostname</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.files.getmtime">
<code class="descclassname">lrms.common.files.</code><code class="descname">getmtime</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/files.html#getmtime"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.files.getmtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Get modification time of <code class="docutils literal"><span class="pre">path</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to file</td>
</tr>
<tr class="field-even field"><th class="field-name">Return str:</th><td class="field-body">modification time</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.log">
<span id="module-lrms-common-log"></span><h3>Module: lrms.common.log<a class="headerlink" href="#module-lrms.common.log" title="Permalink to this headline">¶</a></h3>
<p>Methods for logging.</p>
<dl class="function">
<dt id="lrms.common.log.debug">
<code class="descclassname">lrms.common.log.</code><code class="descname">debug</code><span class="sig-paren">(</span><em>message=''</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#debug"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a <code class="docutils literal"><span class="pre">DEBUG</span></code> message to the log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; log message</li>
<li><strong>caller</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; name of function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.log.verbose">
<code class="descclassname">lrms.common.log.</code><code class="descname">verbose</code><span class="sig-paren">(</span><em>message=''</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#verbose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a <code class="docutils literal"><span class="pre">VERBOSE</span></code> message to the log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; log message</li>
<li><strong>caller</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; name of function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.log.info">
<code class="descclassname">lrms.common.log.</code><code class="descname">info</code><span class="sig-paren">(</span><em>message=''</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Print an <code class="docutils literal"><span class="pre">INFO</span></code> message to the log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; log message</li>
<li><strong>caller</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; name of function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.log.warn">
<code class="descclassname">lrms.common.log.</code><code class="descname">warn</code><span class="sig-paren">(</span><em>message=''</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#warn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.warn" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a <code class="docutils literal"><span class="pre">WARNING</span></code> message to the log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; log message</li>
<li><strong>caller</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; name of function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.log.error">
<code class="descclassname">lrms.common.log.</code><code class="descname">error</code><span class="sig-paren">(</span><em>message=''</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Print an <code class="docutils literal"><span class="pre">ERROR</span></code> message to the log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; log message</li>
<li><strong>caller</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; name of function</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="lrms.common.log.ArcError">
<em class="property">exception </em><code class="descclassname">lrms.common.log.</code><code class="descname">ArcError</code><span class="sig-paren">(</span><em>msg</em>, <em>caller=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/log.html#ArcError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.log.ArcError" title="Permalink to this definition">¶</a></dt>
<dd><p>Print an <code class="docutils literal"><span class="pre">ERROR</span></code> to the log, sleep for 10 seconds and exit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>msg</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; error message</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.parse">
<span id="module-lrms-common-parse"></span><h3>Module: lrms.common.parse<a class="headerlink" href="#module-lrms.common.parse" title="Permalink to this headline">¶</a></h3>
<p>Classes for parsing GRAMI files.</p>
<dl class="class">
<dt id="lrms.common.parse.SimpleGramiParser">
<em class="property">class </em><code class="descclassname">lrms.common.parse.</code><code class="descname">SimpleGramiParser</code><span class="sig-paren">(</span><em>grami</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/parse.html#SimpleGramiParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.parse.SimpleGramiParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Read grami file and set each option as a class attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>grami</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to grami file</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="lrms.common.parse.SimpleGramiParser.jobid">
<code class="descname">jobid</code><a class="headerlink" href="#lrms.common.parse.SimpleGramiParser.jobid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get local ID from grami or job local file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">local ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="lrms.common.parse.SimpleGramiParser.gridid">
<code class="descname">gridid</code><a class="headerlink" href="#lrms.common.parse.SimpleGramiParser.gridid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get GRID (global) job ID from grami.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">GRID job ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="lrms.common.parse.SimpleGramiParser.controldir">
<code class="descname">controldir</code><a class="headerlink" href="#lrms.common.parse.SimpleGramiParser.controldir" title="Permalink to this definition">¶</a></dt>
<dd><p>Get control directory from grami.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">control directory</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="lrms.common.parse.SimpleGramiParser.arg_code">
<code class="descname">arg_code</code><a class="headerlink" href="#lrms.common.parse.SimpleGramiParser.arg_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Get expected exit code from grami.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">arg code</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">int</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lrms.common.parse.RTE0EnvCreator">
<em class="property">class </em><code class="descclassname">lrms.common.parse.</code><code class="descname">RTE0EnvCreator</code><span class="sig-paren">(</span><em>jobdesc</em>, <em>config</em>, <em>mappingUpdate={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/parse.html#RTE0EnvCreator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.parse.RTE0EnvCreator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="lrms.common.parse.JobDescriptionParserGRAMi">
<em class="property">class </em><code class="descclassname">lrms.common.parse.</code><code class="descname">JobDescriptionParserGRAMi</code><a class="reference internal" href="_modules/lrms/common/parse.html#JobDescriptionParserGRAMi"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.parse.JobDescriptionParserGRAMi" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.proc">
<span id="module-lrms-common-proc"></span><h3>Module: lrms.common.proc<a class="headerlink" href="#module-lrms.common.proc" title="Permalink to this headline">¶</a></h3>
<p>Execute bash commands locally or remotely (SSH).</p>
<dl class="function">
<dt id="lrms.common.proc.execute_local">
<code class="descclassname">lrms.common.proc.</code><code class="descname">execute_local</code><span class="sig-paren">(</span><em>args</em>, <em>env={}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/proc.html#execute_local"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.proc.execute_local" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a command locally. This method is a wrapper for
<a class="reference external" href="http://docs.python.org/2.6/library/subprocess.html#subprocess.Popen" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">subprocess.Popen</span></code></a> with stdout and stderr piped to
temporary files and <code class="docutils literal"><span class="pre">shell=True</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; command with arguments (e.g. &#8216;sbatch myjob.sh&#8217;)</li>
<li><strong>env</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/stdtypes.html#dict" title="(in Python v2.6)"><em>dict</em></a>) &#8211; environment variables  (default: {})</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">handle</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/2.6/library/subprocess.html#subprocess.Popen" title="(in Python v2.6)"><code class="xref py py-class docutils literal"><span class="pre">subprocess.Popen</span></code></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Note:</th><td class="field-body"><p class="first last"><code class="docutils literal"><span class="pre">wait()</span></code> is called, and <code class="docutils literal"><span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> are read and splitted by newlines</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.proc.execute_remote">
<code class="descclassname">lrms.common.proc.</code><code class="descname">execute_remote</code><span class="sig-paren">(</span><em>args</em>, <em>host=None</em>, <em>timeout=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/proc.html#execute_remote"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.proc.execute_remote" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a command on the remote host using the SSH protocol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; command with arguments (e.g. &#8216;sbatch myjob.sh&#8217;)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">object with attributes <code class="docutils literal"><span class="pre">stdout</span></code>, <code class="docutils literal"><span class="pre">stderr</span></code>     and <code class="docutils literal"><span class="pre">returncode</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.scan">
<span id="module-lrms-common-scan"></span><h3>Module: lrms.common.scan<a class="headerlink" href="#module-lrms.common.scan" title="Permalink to this headline">¶</a></h3>
<p>Defines constants and functions related to scanning.</p>
<p>RUNNING: list of possible states reported by the bactch system for jobs that are running
MESSAGES: mapping between job state reported by batch system and grid-manager state
UID: user ID of user running PythonLRMS
GID: group ID of user running PythonLRMS</p>
<dl class="function">
<dt id="lrms.common.scan.get_jobs">
<code class="descclassname">lrms.common.scan.</code><code class="descname">get_jobs</code><span class="sig-paren">(</span><em>ctrdirs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#get_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.get_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan control directories for jobs with status <em>INLRMS</em> or <em>CANCELING</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ctrdirs</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><em>list</em></a>) &#8211; list of paths to control directories</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">dictionary that maps local job ID to job object</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/stdtypes.html#dict" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">dict</span></code></a> { <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> : <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a> ... }</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The returned job obects have the following attributes:</p>
</div>
<p><code class="docutils literal"><span class="pre">localid</span></code>, <code class="docutils literal"><span class="pre">gridid</span></code>, <code class="docutils literal"><span class="pre">local_file</span></code>, <code class="docutils literal"><span class="pre">lrms_done_file</span></code>, <code class="docutils literal"><span class="pre">grami_file</span></code>,
<code class="docutils literal"><span class="pre">output_file</span></code>, <code class="docutils literal"><span class="pre">state</span></code>, <code class="docutils literal"><span class="pre">uid</span></code>, <code class="docutils literal"><span class="pre">gid</span></code>, <code class="docutils literal"><span class="pre">sessiondir</span></code>,
<code class="docutils literal"><span class="pre">diag_file</span></code>, <code class="docutils literal"><span class="pre">count_file</span></code>, <code class="docutils literal"><span class="pre">errors_file</span></code> and <code class="docutils literal"><span class="pre">comment_file</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.set_exit_code_from_diag">
<code class="descclassname">lrms.common.scan.</code><code class="descname">set_exit_code_from_diag</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#set_exit_code_from_diag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.set_exit_code_from_diag" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve exit code from the diag file and set the <code class="docutils literal"><span class="pre">job.exitcode</span></code> attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a>) &#8211; job object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if exit code was found, else <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.add_failure">
<code class="descclassname">lrms.common.scan.</code><code class="descname">add_failure</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#add_failure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.add_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Add +1 to the failure counter. If a job has more than 5 failures,
it is marked as lost with unknown exit code. A failure is typically
added if the job stopped running, but reading exit code from diag 
file failed.</p>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.update_diag">
<code class="descclassname">lrms.common.scan.</code><code class="descname">update_diag</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#update_diag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.update_diag" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters out WallTime from the diag file if present and
replaces it with output from the batch system. It also adds 
StartTime and EndTime for accounting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a>) &#8211; job object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.read_local_file">
<code class="descclassname">lrms.common.scan.</code><code class="descname">read_local_file</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#read_local_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.read_local_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the local file and set  <code class="docutils literal"><span class="pre">job.localid</span></code> and <code class="docutils literal"><span class="pre">job.sessiondir</span></code> attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a>) &#8211; job object</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if successful, else <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.gm_kick">
<code class="descclassname">lrms.common.scan.</code><code class="descname">gm_kick</code><span class="sig-paren">(</span><em>jobs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#gm_kick"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.gm_kick" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute <code class="docutils literal"><span class="pre">gm-kick</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#list" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> [ <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a> ... ]) &#8211; list of jobs to be kicked</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.write_comments">
<code class="descclassname">lrms.common.scan.</code><code class="descname">write_comments</code><span class="sig-paren">(</span><em>job</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#write_comments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.write_comments" title="Permalink to this definition">¶</a></dt>
<dd><p>Write content of comment file to errors file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#object" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">object</span></code></a>) &#8211; job object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.get_MDS">
<code class="descclassname">lrms.common.scan.</code><code class="descname">get_MDS</code><span class="sig-paren">(</span><em>dm</em>, <em>lc_time='en_US'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#get_MDS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.get_MDS" title="Permalink to this definition">¶</a></dt>
<dd><p>Get date and time in MDS format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dm</strong> &#8211; dictionary with keys &#8216;yyyy&#8217;, &#8216;mm&#8217;|&#8217;bbb&#8217;,</td>
</tr>
</tbody>
</table>
<p>&#8216;dd&#8217;, &#8216;HH&#8217;, &#8216;MM&#8217; and &#8216;SS&#8217;
:type dm: <a class="reference external" href="http://docs.python.org/2.6/library/stdtypes.html#dict" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">dict</span></code></a>
:param str lc_time: the locale, if &#8216;bbb&#8217; given
:return: string on the form &#8216;yyyy-mm-ddTHH:MM:SS&#8217;
:rtype: <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="lrms.common.scan.is_running">
<code class="descclassname">lrms.common.scan.</code><code class="descname">is_running</code><span class="sig-paren">(</span><em>pid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/scan.html#is_running"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.scan.is_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if process is running on the local machine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pid</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; process ID</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> if process is running, else <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#bool" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.ssh">
<span id="module-lrms-common-ssh"></span><h3>Module: lrms.common.ssh<a class="headerlink" href="#module-lrms.common.ssh" title="Permalink to this headline">¶</a></h3>
<p>Provides the <code class="docutils literal"><span class="pre">SSHSession</span></code> dictionary, which maps host
to <code class="xref py py-class docutils literal"><span class="pre">paramiko.transport.Transport</span></code>.</p>
<dl class="function">
<dt id="lrms.common.ssh.ssh_connect">
<code class="descclassname">lrms.common.ssh.</code><code class="descname">ssh_connect</code><span class="sig-paren">(</span><em>host</em>, <em>user</em>, <em>pkey</em>, <em>window_size=65535</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/ssh.html#ssh_connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.ssh.ssh_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <code class="xref py py-class docutils literal"><span class="pre">paramiko.Transport</span></code> object and adds it to
<code class="docutils literal"><span class="pre">SSHSession</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>host</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; remote host</li>
<li><strong>user</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; username at remote host</li>
<li><strong>pkey</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; path to private RSA key</li>
<li><strong>window_size</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#int" title="(in Python v2.6)"><em>int</em></a>) &#8211; TCP window size</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Note:</th><td class="field-body"><p class="first last">if command execution times out and output is truncated, it is likely that the TCP window is too small</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
<hr class="docutils" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="module-lrms.common.submit">
<span id="module-lrms-common-submit"></span><h3>Module: lrms.common.submit<a class="headerlink" href="#module-lrms.common.submit" title="Permalink to this headline">¶</a></h3>
<p>Common submit job functions.</p>
<dl class="function">
<dt id="lrms.common.submit.validate_attributes">
<code class="descclassname">lrms.common.submit.</code><code class="descname">validate_attributes</code><span class="sig-paren">(</span><em>jd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#validate_attributes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.validate_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if GRID (global) job ID and executable are set in job description
and that runtime environment is resolved. For none-shared filesystems, 
the scratchdir must also be specified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jd</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescription</span></code>) &#8211; job description object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.submit.write_script_file">
<code class="descclassname">lrms.common.submit.</code><code class="descname">write_script_file</code><span class="sig-paren">(</span><em>jobscript</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#write_script_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.write_script_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Write job script to file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobscript</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><em>str</em></a>) &#8211; job script buffer</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">path to file</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.submit.set_req_mem">
<code class="descclassname">lrms.common.submit.</code><code class="descname">set_req_mem</code><span class="sig-paren">(</span><em>jd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#set_req_mem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.set_req_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Set memory requirement attributes in job description.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jd</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescription</span></code>) &#8211; job description object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lrms.common.submit.RTE_stage0">
<code class="descclassname">lrms.common.submit.</code><code class="descname">RTE_stage0</code><span class="sig-paren">(</span><em>jd</em>, <em>lrms</em>, <em>**mapping</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#RTE_stage0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.RTE_stage0" title="Permalink to this definition">¶</a></dt>
<dd><p>Source RTE scripts and update job description environment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>jd</strong> (<code class="xref py py-class docutils literal"><span class="pre">arc.JobDescription</span></code>) &#8211; job description object</li>
<li><strong>**mapping</strong> (<a class="reference external" href="http://docs.python.org/2.6/library/stdtypes.html#dict" title="(in Python v2.6)"><em>dict</em></a>) &#8211; <p>additional environment variables</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="lrms.common.submit.JobscriptAssembler">
<em class="property">class </em><code class="descclassname">lrms.common.submit.</code><code class="descname">JobscriptAssembler</code><span class="sig-paren">(</span><em>jobdesc</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses and expands the jobscript stubs defined in job_script.stubs.
Each stub is initiated by a line starting with &#8216;&gt;&gt;&#8217;, followed by
the name of the stub. The stub must be enclosed within two &#8216;&gt;&#8217; on
separate lines.:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt; set_some_vars
&gt;
export FOO=bar
export BAR=baz
&gt;
</pre></div>
</div>
<p>To expand variables, use the Python format syntax %(LOCAL)s.:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt; set_sessiondir
&gt;
export RUNTIME_SESSIONDIR=%(SESSIONDIR)s
&gt;
</pre></div>
</div>
<p>This will evaluate to the session directory specified in the 
job description, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>export RUNTIME_SESSIONDIR=/scratch/grid/123456
</pre></div>
</div>
<p>It is also possible to define loops that depend on some iterable 
in the job description object. For example, the attribute
Application.Environment is an iterable, where each item is a tuple
with two elements: name of environment variable and value of 
environment variable. This is mapped to &#8216;ENVS&#8217; with macros
&#8216;ENV&#8217; and &#8216;ENV_VAL&#8217;.</p>
<p>Loops must be enclosed within two &#8216;&#64;&#8217; on separate lines. The top &#8216;&#64;&#8217;
must be followed by the map name of the iterable and the map name 
of the macro(s) that resolves the string format variables. The 
simplest macro is mapped to &#8216;ITEM&#8217; and simply returns the current 
item in the iterable. This is only applicable when each item is a 
string. Note the &#8216;%&#8217; in front of each macro name in the first line
following example.:</p>
<div class="highlight-python"><div class="highlight"><pre>@ ENVS %ENV %ENV_VAL
export %(ENV)s=%(ENV_VAL)s
@
</pre></div>
</div>
<p>This will evaluate to a list of export lines for every environment 
variable represented in Application.Environment.</p>
<p>All format variables, iterables and macros are defined in the 
<code class="docutils literal"><span class="pre">map</span></code> attribute.</p>
<dl class="method">
<dt id="lrms.common.submit.JobscriptAssembler.get_standard_jobscript">
<code class="descname">get_standard_jobscript</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler.get_standard_jobscript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler.get_standard_jobscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Assemble a generic, out-of-the-box jobscript. This does
not contain the batch system-specific instructions you
typically find at the top of the jobscript.</p>
<p>return: jobscript
rtype: <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lrms.common.submit.JobscriptAssembler.get_stub">
<code class="descname">get_stub</code><span class="sig-paren">(</span><em>stub</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler.get_stub"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler.get_stub" title="Permalink to this definition">¶</a></dt>
<dd><p>Get formatted jobscript stub.</p>
<p>param str stub: name of jobscript stub 
return: jobscript stub
rtype: <a class="reference external" href="http://docs.python.org/2.6/library/functions.html#str" title="(in Python v2.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lrms.common.submit.JobscriptAssembler.setup_local_transfer">
<code class="descname">setup_local_transfer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler.setup_local_transfer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler.setup_local_transfer" title="Permalink to this definition">¶</a></dt>
<dd><p>Create runtime control directory and update job input and output files.
RUNTIME_CONTROLDIR is added to the string format map.</p>
</dd></dl>

<dl class="method">
<dt id="lrms.common.submit.JobscriptAssembler.setup_cleaning">
<code class="descname">setup_cleaning</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler.setup_cleaning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler.setup_cleaning" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup trash cleaning. No reason to keep trash until gm-kick runs.</p>
</dd></dl>

<dl class="method">
<dt id="lrms.common.submit.JobscriptAssembler.setup_runtime_env">
<code class="descname">setup_runtime_env</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/lrms/common/submit.html#JobscriptAssembler.setup_runtime_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lrms.common.submit.JobscriptAssembler.setup_runtime_env" title="Permalink to this definition">¶</a></dt>
<dd><p>For non-shared filesystems, replace sessiondir with local scratchdir
in the stdin, stdout and stderr paths.</p>
</dd></dl>

</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
</div>


    </div>
    
    <DIV>
      <OBJECT type="text/html" data="http//www.nordugrid.org/styles/ngfooter.html" width="100%">
	<center><a href="http//www.nordugrid.org">Nordugrid homepage</a></center>
      </OBJECT>
    </DIV>
  </body>
</html>
